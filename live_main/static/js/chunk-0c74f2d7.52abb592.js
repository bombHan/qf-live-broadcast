(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c74f2d7"],{"0834":function(t,a,e){},5578:function(t,a,e){"use strict";e("5ce9")},"5ce9":function(t,a,e){},"70ef":function(t,a){t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAAeAB4DASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAABAYAAQUJ/8QALxAAAQMDAgQFAQkAAAAAAAAAAQIDBQQGEQBBBxIhURMUMTJhIhUjNEJigZGxwf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDp7c90R1oRLkjJveEwkhCUpHMtxZ9EITuo9v8ANKjM5xCn0iojoOJg6RXVtM264t9Q2JQ37T8E5Gql2ETXGuIo6sc9NGxK5GnaV7S+p0N82NylIGOxOdU9xAudu05GTFl1f2hT1vl2aAOFSnW8j73onONugI3zjQR2+7itApXd8LTiMJAXLQzinWmc7uNqHOE/q66f6eoaq6dt9hxLzLiQtDiDlKkkZBB3GlOTuWXNxQkSbYdqYySpiqtqlK5m6YkHLaumDjfJGc9NAcGiqmg5mLStS6SKmaqhpSo5PgpUCkZ3wVEftoNC+rWr5GqjpyCcbanosq8JDxw3UtK97KztnGQdj/IBa4yQ1CgN3DT1ttVyR9bFdTLKc78riQUqHY569tPug5eLZm4mtjqnm8vWMLp3eQ4VyrSUnB74OgUJ2/35aqchLPbRJyxTh6tP4WgB/M4rdXZAyenX0xphs612LOt6ljGHFPlvK3X1+55xRytZ+SSf60VBQEdbMa1HxdI3RUjY+ltsb9yfUn5PXWhoP//Z"},"826a":function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("a-modal",{staticClass:"live-broadcast-card-codal",attrs:{maskClosable:!1,title:"直播卡片",visible:!!t.modalShow,footer:null,width:900},on:{cancel:t.cancel}},[o("a-spin",{attrs:{spinning:t.loading}},[o("div",{staticStyle:{display:"flex","flex-direction":"row-reverse"}},[o("a-button",{attrs:{type:"primary",disabled:!(!t.cardInfo.resId&&t.cardInfo.mobilePhone)},on:{click:t.turnToHyx}},[t._v("转至慧营销")])],1),o("div",{staticClass:"info"},[o("a-avatar",{staticStyle:{color:"#fff",width:"55px",height:"55px","line-height":"55px","margin-right":"20px","font-size":"24px"},attrs:{src:t.cardInfo.imgUrl}}),o("div",{staticClass:"info-content"},[o("a-row",{staticClass:"info-content-item"},[o("a-col",{staticClass:"title",attrs:{span:8}},[t._v("客户名称：")]),o("a-col",{attrs:{span:1}}),o("a-col",{attrs:{span:15}},[t._v(t._s(t.cardInfo.nickname))])],1),o("a-row",{staticClass:"info-content-item"},[o("a-col",{staticClass:"title",attrs:{span:8}},[t._v("手机号：")]),o("a-col",{attrs:{span:1}}),o("a-col",{attrs:{span:15}},[t._v(t._s(t.cardInfo.mobilePhone))])],1),o("a-row",{staticClass:"info-content-item"},[o("a-col",{staticClass:"title",attrs:{span:8}},[t._v("IP：")]),o("a-col",{attrs:{span:1}}),o("a-col",{attrs:{span:15}},[t._v(t._s(t.cardInfo.ipAddress))])],1),o("a-row",{staticClass:"info-content-item"},[o("a-col",{staticClass:"title",attrs:{span:8}},[t._v("促单接待：")]),o("a-col",{attrs:{span:1}}),o("a-col",{attrs:{span:15}},[t._v(t._s(t.cardInfo.receptionName))])],1)],1)],1),o("div",{staticStyle:{display:"flex"}},[o("a-tabs",{attrs:{"tab-position":"left",size:"large"},on:{change:t.tabChange},model:{value:t.activeTab,callback:function(a){t.activeTab=a},expression:"activeTab"}},[o("a-tab-pane",{key:"1",attrs:{tab:"访客日志"}}),this.cardInfo.resId&&this.cardInfo.isShowHyx?o("a-tab-pane",{key:"2",attrs:{tab:"慧营销资料"}}):t._e(),this.cardInfo.resId?o("a-tab-pane",{key:"3",attrs:{tab:"点评"}}):t._e(),this.cardInfo.imSessionId?o("a-tab-pane",{key:"4",attrs:{tab:"私聊"}}):t._e()],1),o("div",{staticStyle:{flex:"1"}},["1"===t.activeTab?o("div",{staticClass:"content1 content"},[t.visitorLogList.length>0?t._l(t.visitorLogList,(function(a,e){return o("div",{key:e,staticClass:"content1-item"},[o("div",{staticClass:"title"},[t._v("时间：")]),o("div",{staticClass:"text"},[t._v(t._s(a.inputTime))]),o("div",{staticClass:"title"},[t._v("操作：")]),o("div",{staticClass:"text"},[t._v(t._s(a.operation))]),o("div",{staticClass:"title"},[t._v("备注：")]),o("div",{staticClass:"text"},[t._v(t._s(a.remark))])])})):o("a-empty",{staticStyle:{"margin-top":"20px"},attrs:{image:t.$Empty.PRESENTED_IMAGE_SIMPLE}})],2):t._e(),"2"===t.activeTab?o("div",{staticClass:"content2"},[o("iframe",{attrs:{id:"iframe",src:""+t.window.location.origin+t.$config.hyxFront+"/#/customer-card?type=zb&id="+this.cardInfo.resId}})]):t._e(),"3"===t.activeTab?o("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","margin-bottom":"15px"}},[o("a-button",{attrs:{ghost:"",type:"primary"},on:{click:function(a){t.commentModalShow=!0}}},[t._v("写点评")])],1):t._e(),"3"===t.activeTab?o("div",{staticClass:"content3 content"},[t.commentList.length>0?t._l(t.commentList,(function(a,i){return o("div",{key:i,staticClass:"content3-item"},[o("div",{staticClass:"top"},[o("img",{staticStyle:{"margin-right":"20px"},attrs:{src:e("70ef"),alt:"img"}}),o("div",[o("div",{staticStyle:{"margin-bottom":"10px"}},[o("span",{staticClass:"label"},[t._v("点评时间：")]),o("span",[t._v(t._s(a.reviewDate))])]),o("div",[o("span",{staticClass:"label"},[t._v("提交人：")]),o("span",[t._v(t._s(a.reviewAcc))])])])]),o("div",{staticClass:"bottom"},[o("div",{staticClass:"label",staticStyle:{flex:"none"}},[t._v("点评内容：")]),o("div",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(a.revComment))])])])})):o("a-empty",{attrs:{image:t.$Empty.PRESENTED_IMAGE_SIMPLE}})],2):t._e(),"4"===t.activeTab?o("div",{staticClass:"content2"},[o("iframe",{attrs:{id:"iframe",src:""+t.window.location.origin+t.$config.chatFront+"/#/conversation?data="+t.base64}})]):t._e(),"1"===t.activeTab?o("div",{staticStyle:{display:"flex","flex-direction":"row-reverse"}},[o("a-pagination",{staticStyle:{"margin-top":"15px"},attrs:{showTotal:function(a){return"共 "+t.pagination.total+" 条"},showSizeChanger:"",showQuickJumper:"",pageSize:t.pagination.pageSize,total:t.pagination.total,current:t.pagination.pageNum},on:{change:t.pagerChange,showSizeChange:t.sizeChange}})],1):t._e()])],1)]),t.commentModalShow?o("commentModal",{attrs:{modalShow:t.commentModalShow},on:{ok:t.commentModalOk,cancel:function(a){t.commentModalShow=!1}}}):t._e()],1)},i=[],n=(e("ac67"),e("1bc78"),e("32ea"),e("3612")),s=e("4ec3"),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-modal",{staticClass:"comment-modal",attrs:{maskClosable:!1,title:"发表评论",visible:t.modalShow},on:{cancel:t.cancel,ok:t.ok}},[e("a-form-model",{ref:"form",attrs:{model:t.formData}},[e("a-form-model-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:16},label:"评论内容",prop:"revComment",rules:[{required:!0,message:"请填写评论内容"}]}},[e("a-textarea",{attrs:{maxLength:200,placeholder:"请输入内容",rows:5,autoSize:{minRows:5,maxRows:5}},model:{value:t.formData.revComment,callback:function(a){t.$set(t.formData,"revComment","string"===typeof a?a.trim():a)},expression:"formData.revComment"}})],1)],1)],1)},c=[],l={name:"commentModal",props:{modalShow:{type:Boolean,default:!1,required:!1}},data:function(){return{formData:{revComment:""}}},created:function(){},methods:{ok:function(){var t=this;this.$refs.form.validate((function(a){a&&t.$emit("ok",t.formData)}))},cancel:function(){this.$emit("cancel")}}},d=l,f=(e("c3b0"),e("4ac2")),m=Object(f["a"])(d,r,c,!1,null,null,null),g=m.exports,p=e("caaf"),u=e.n(p);const h="function"===typeof btoa,A="function"===typeof Buffer,v=("function"===typeof TextDecoder&&new TextDecoder,"function"===typeof TextEncoder?new TextEncoder:void 0),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",y=[...b],w=((t=>{let a={};t.forEach((t,e)=>a[t]=e)})(y),String.fromCharCode.bind(String)),C=("function"===typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),t=>t.replace(/[+\/]/g,t=>"+"==t?"-":"_").replace(/=+$/m,"")),x=t=>{let a,e,o,i,n="";const s=t.length%3;for(let r=0;r<t.length;){if((e=t.charCodeAt(r++))>255||(o=t.charCodeAt(r++))>255||(i=t.charCodeAt(r++))>255)throw new TypeError("invalid character found");a=e<<16|o<<8|i,n+=y[a>>18&63]+y[a>>12&63]+y[a>>6&63]+y[63&a]}return s?n.slice(0,s-3)+"===".substring(s):n},I=h?t=>btoa(t):A?t=>Buffer.from(t,"binary").toString("base64"):x,S=A?t=>Buffer.from(t).toString("base64"):t=>{const a=4096;let e=[];for(let o=0,i=t.length;o<i;o+=a)e.push(w.apply(null,t.subarray(o,o+a)));return I(e.join(""))},B=t=>{if(t.length<2){var a=t.charCodeAt(0);return a<128?t:a<2048?w(192|a>>>6)+w(128|63&a):w(224|a>>>12&15)+w(128|a>>>6&63)+w(128|63&a)}a=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return w(240|a>>>18&7)+w(128|a>>>12&63)+w(128|a>>>6&63)+w(128|63&a)},Q=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,D=t=>t.replace(Q,B),_=A?t=>Buffer.from(t,"utf8").toString("base64"):v?t=>S(v.encode(t)):t=>I(D(t)),E=(t,a=!1)=>a?C(_(t)):_(t);function T(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,o)}return e}function k(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?T(Object(e),!0).forEach((function(a){Object(n["a"])(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):T(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var M={name:"liveBroadcastCardModal",components:{commentModal:g},props:{modalShow:{type:[Boolean,Object],default:!1,required:!1}},data:function(){return{window:window,moment:u.a,colorNumber:0,loading:!1,cardInfo:{},activeTab:"1",visitorLogList:[],hyxDataList:[],commentList:[],commentModalShow:!1,pagination:{pageSize:10,pageNum:1,total:0}}},computed:{base64:function(){var t=JSON.stringify({source:1,orgId:this.cardInfo.orgId,sessionId:this.cardInfo.imSessionId,msgTimeEnd:u()().format("YYYY-MM-DD 23:59:59"),changStatus:"C2C",repectionAccount:this.cardInfo.receptionId,lsrId:this.modalShow.zbId?this.modalShow.zbId:this.$route.query.zbId}),a=E(t);return a}},created:function(){this.getInfo(),this.colorNumber=Math.floor(4*Math.random())},methods:{getInfo:function(){var t=this;s["a"].visitorFindVisitorByVisitId({visitId:this.modalShow.visitId}).then((function(a){console.log("直播卡片人员信息",a.data),t.cardInfo=k({},a.data),t.activeTab="1",t.tabChange("1"),t.getData(),console.log(t.base64)}))},turnToHyx:function(){var t=this.$createElement;console.log("转至慧营销",this.cardInfo);var a=1,e=this;this.$confirm({title:"转入慧营销",content:t("div",{style:"margin-top: 20px"},[t("a-radio-group",{attrs:{defaultValue:1},on:{change:function(t){a=t.target.value,console.log(a)}}},[t("div",{style:"margin-bottom: 20px"},[t("a-radio",{attrs:{value:1}},["转至慧营销—市场推广"])]),t("div",[t("a-radio",{attrs:{value:2}},["转至慧营销—我的资源"])])])]),okText:"确定",cancelText:"取消",onOk:function(){console.log(e.cardInfo.id,a),s["a"].visitorJoinHyx({type:a,ids:[e.cardInfo.id]}).then((function(t){e.$message.success(t.msg),e.getInfo()}))}})},tabChange:function(t){this.pagination.pageNum=1,this.pagination.total=0,this.getData()},sizeChange:function(t,a){this.pagination.pageSize=a,this.pagination.pageNum=1,this.getData()},pagerChange:function(t,a){this.pagination.pageNum=t,this.getData()},getData:function(){console.log("tab的值",this.activeTab),"1"===this.activeTab?this.getVisitorLog():"2"===this.activeTab?this.getHyxData():"3"===this.activeTab&&this.getComment()},getVisitorLog:function(){var t=this;this.loading=!0,s["a"].zbVisitorLogListPageJson({visitId:this.modalShow.visitId,pageSize:this.pagination.pageSize,pageNum:this.pagination.pageNum}).then((function(a){console.log("访客日志列表",a.data),t.visitorLogList=a.data.list,t.pagination=k(k({},t.pagination),{},{total:a.data.total}),t.loading=!1})).catch((function(a){t.loading=!1}))},getHyxData:function(){this.hyxDataList=[],this.loading=!0,this.loading=!1},getComment:function(){var t=this;this.loading=!0,s["a"].cardCustReviewList({custId:this.cardInfo.resId}).then((function(a){console.log("点评列表",a.data),t.commentList=a.data,t.loading=!1})).catch((function(a){t.loading=!1}))},commentModalOk:function(t){var a=this;console.log(t),s["a"].cardSaveReview(k(k({},t),{},{custId:this.cardInfo.resId})).then((function(t){a.$message.success("发表成功"),a.commentModalShow=!1,a.getData()}))},cancel:function(){this.$emit("cancel")}}},U=M,F=(e("f600"),e("5578"),Object(f["a"])(U,o,i,!1,null,"d9647118",null));a["a"]=F.exports},c3b0:function(t,a,e){"use strict";e("0834")},f600:function(t,a,e){"use strict";e("f790")},f790:function(t,a,e){}}]);
//# sourceMappingURL=chunk-0c74f2d7.52abb592.js.map